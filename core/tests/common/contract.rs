use alloy::sol;

sol! {
    #[sol(rpc, bytecode="0x6080604052346102b757604051601f61266438819003918201601f19168301916001600160401b0383118484101761015a578084926020946040528339810103126102b757516001600160a01b038116908190036102b75780156102a4575f8181525f5160206126245f395f51905f52602052604090205465ffffffffffff161580156101825765ffffffffffff610096426102bb565b1665ffffffffffff811161016e578060405191604083019383851060018060401b0386111761015a5760409485529183525f60208085018281528783525f5160206126245f395f51905f529091529481209351845495516001600160a01b031990961665ffffffffffff919091161760309590951b600160301b600160a01b0316949094179092555f5160206126445f395f51905f52916060915b65ffffffffffff604051928684521660208301526040820152a360405161233990816102eb8239f35b634e487b7160e01b5f52604160045260245ffd5b634e487b7160e01b5f52601160045260245ffd5b5f8281525f5160206126245f395f51905f526020526040902054906101a6426102bb565b63ffffffff8360301c169265ffffffffffff808260701c1692168211155f146102925750505b63ffffffff8216801561028b5763ffffffff811161016e575b65ffffffffffff63ffffffff6101fa426102bb565b921691160165ffffffffffff811161016e575f8481525f5160206126245f395f51905f52602090815260408083208054600160301b600160a01b0319169185901b6dffffffffffff0000000000000000169690921b67ffffffff00000000169590951760301b600160301b600160a01b0316949094179093555f5160206126445f395f51905f529160609190610131565b505f6101e5565b63ffffffff9060501c169250506101cc565b630409d6d160e11b5f525f60045260245ffd5b5f80fd5b65ffffffffffff81116102d35765ffffffffffff1690565b6306dfcc6560e41b5f52603060045260245260445ffdfe60806040526004361015610011575f80fd5b5f5f3560e01c806308d6122d146115195780630b0a93ba146114d457806312be8727146114b1578063167bd3951461142657806318ff183c146113945780631cff79cd1461125557806325c471a014610f4c5780633078f11414610ef157806330cae18714610e535780633adc277a14610e245780633ca7c02a14610e025780634136a33c14610dcf5780634665096d14610db15780634c1da1e214610d7f5780635296295214610cc7578063530dd45614610c735780636d5115bd14610c1357806375b238fc14610bf7578063853551b814610b3d57806394c7d7ee14610a77578063a166aa8914610a2b578063a64d95ce1461091f578063abd9bd2a146108fa578063ac9650d81461074d578063b700961314610708578063b7d2b162146106d5578063cc1b6c81146106b7578063d1f856ee14610672578063d22b5989146105a3578063d6bb62c6146103ef578063f801a698146101cc5763fe0776f51461017a575f80fd5b346101c95760403660031901126101c957610193611656565b61019b611610565b90336001600160a01b038316036101ba57906101b691611d50565b5080f35b635f159e6360e01b8352600483fd5b80fd5b50346101c95760603660031901126101c9576101e66115fa565b906024356001600160401b0381116103eb57610206903690600401611682565b919060443565ffffffffffff81168091036103e75761022784838733611af8565b905061024363ffffffff61023a426122d4565b92168092611a27565b901580156103cc575b610393579065ffffffffffff809216908180821191180218169061027284828733611881565b93848452600260205265ffffffffffff6040852054168015159081610382575b5061036e57604095849361035f87947f82a2da5dee54ea8021c6545b4444620291e07ee83be6dd57edb175062715f3b494868b99526002602052600163ffffffff8a8a205460301c160163ffffffff81169989898c9b52600260205281812065ffffffffffff881665ffffffffffff198254161790558981526002602052209069ffffffff00000000000082549160301b169069ffffffff00000000000019161790558a51948594855233602086015260018060a01b03168b850152608060608501526080840191611861565b0390a382519182526020820152f35b63813e945960e01b84526004859052602484fd5b61038c9150611cfa565b155f610292565b606484876103a18887611b3f565b6381c6f24b60e01b8352336004526001600160a01b039091166024526001600160e01b031916604452fd5b50811515801561024c575065ffffffffffff8116821061024c565b8280fd5b5080fd5b50346101c9576104179061040236611705565b61040f8183949793611b3f565b928685611881565b91828452600260205265ffffffffffff604085205416155f146104485763060a299b60e41b84526004839052602484fd5b6001600160a01b0316903382036104ba575b505060209250808252600283526040822065ffffffffffff1981541690558082526002835263ffffffff604083205460301c1680917fbd9ac67a6e2f6463b80927326310338bcbb4bdb7936ce1365ea3e01067e7b9f76040519480a38152f35b65ffffffffffff946104cc335f6117bd565b50509616958615159687610586575b505060018060a01b03169485855284602052604085209163ffffffff60e01b16918286526020526105433361053e6001600160401b036040892054166001600160401b03165f5260016020526001600160401b03600160405f20015460401c1690565b6119d1565b509015908161057d575b501561045a57608492508460405192630ff89d4760e21b8452336004850152602484015260448301526064820152fd5b9050155f61054d565b90965065ffffffffffff610599426122d4565b161015955f6104db565b50346101c95760403660031901126101c9576105bd6115fa565b7fa56b76017453f399ec2327ba00375dbfb1fd070ff854341ad6191e6a2e2de19c6105e66116f2565b916105ef611a59565b60018060a01b03169182845283602052610619816001600160701b03600160408820015416612241565b9190848652856020526001600160701b036001604088200191166001600160701b031982541617905561066c6040519283928390929165ffffffffffff60209163ffffffff604085019616845216910152565b0390a280f35b50346101c95760403660031901126101c95761069d61068f611656565b610697611610565b906119d1565b60408051921515835263ffffffff91909116602083015290f35b50346101c957806003193601126101c9576020604051620697808152f35b50346101c95760403660031901126101c9576101b66106f2611656565b6106fa611610565b90610703611a59565b611d50565b50346101c95760603660031901126101c9576107226115fa565b61072a611610565b604435916001600160e01b0319831683036107495761069d935061190f565b8380fd5b50346101c95760203660031901126101c9576004356001600160401b0381116103eb5761077e903690600401611626565b90602060405161078e8282611788565b84815281810191601f1981013684376107a6856118d0565b936107b46040519586611788565b858552601f196107c3876118d0565b01875b8181106108eb57505036819003601e190190875b87811015610873578060051b8201358381121561086f578201908135916001600160401b03831161086b578501823603811361086b578261084961084f928d898c6001986040519687958487013784018281018481528e519283915e010190815203601f198101835282611788565b30611d2e565b610859828a6118e7565b5261086481896118e7565b50016107da565b8a80fd5b8980fd5b88848860405191808301818452825180915260408401918060408360051b870101940192865b8388106108a65786860387f35b9091929394838080600193603f198b8203018752818a518051918291828552018484015e86838284010152601f80199101160101970193019701969093929193610899565b606087820185015283016107c6565b50346101c957602061091761090e36611705565b92919091611881565b604051908152f35b50346101c95760403660031901126101c957610939611656565b6001600160401b036109496116f2565b91610952611a59565b16906001600160401b038214610a17577ffeb69018ee8b8fd50ea86348f1267d07673379f72cffdeccec63853ee8ce8b489082845260016020526109a9816001600160701b03600160408820015460801c16612241565b84865260016020818152604080892090920180546dffffffffffffffffffffffffffff60801b191660809590951b6dffffffffffffffffffffffffffff60801b1694909417909355805163ffffffff909416845265ffffffffffff909116918301919091528190810161066c565b63061c6a4360e21b83526004829052602483fd5b50346101c95760203660031901126101c9576020610a6d610a4a6115fa565b6001600160a01b03165f9081526020819052604090206001015460701c60ff1690565b6040519015158152f35b50346101c957610a86366116af565b91604051638fb3603760e01b8152602081600481335afa908115610b32578591610aeb575b506001600160e01b03191663704c9fc960e01b01610ad85791610ad3916101b6933390611881565b611b55565b630641fee960e31b845233600452602484fd5b90506020813d602011610b2a575b81610b0660209383611788565b81010312610b2657516001600160e01b031981168103610b26575f610aab565b8480fd5b3d9150610af9565b6040513d87823e3d90fd5b50346101c95760403660031901126101c957610b57611656565b602435906001600160401b0382116103e757610b7f6001600160401b03923690600401611682565b929091610b8a611a59565b169182158015610be7575b610bd357907f1256f5b5ecb89caec12db449738f2fbcd1ba5806cf38f35413f4e5c15bf6a4509161066c604051928392602084526020840191611861565b63061c6a4360e21b84526004839052602484fd5b506001600160401b038314610b95565b50346101c957806003193601126101c957602090604051908152f35b50346101c95760403660031901126101c957610c2d6115fa565b6024359063ffffffff60e01b82168092036103e7576001600160a01b0316825260208281526040808420928452918152918190205490516001600160401b039091168152f35b50346101c95760203660031901126101c9576020610cb6610c92611656565b6001600160401b03165f5260016020526001600160401b03600160405f2001541690565b6001600160401b0360405191168152f35b50346101c95760403660031901126101c957610ce1611656565b6001600160401b03610cf161166c565b91610cfa611a59565b169081158015610d6f575b610a17576001600160401b0390828452600160205260016040852001805467ffffffffffffffff60401b8360401b169067ffffffffffffffff60401b191617905516907f7a8059630b897b5de4c08ade69f8b90c3ead1f8596d62d10b6c4d14a0afb4ae28380a380f35b506001600160401b038214610d05565b50346101c95760203660031901126101c9576020610da3610d9e6115fa565b61183a565b63ffffffff60405191168152f35b50346101c957806003193601126101c957602060405162093a808152f35b50346101c95760203660031901126101c95763ffffffff6040602092600435815260028452205460301c16604051908152f35b50346101c957806003193601126101c95760206040516001600160401b038152f35b50346101c95760203660031901126101c9576020610e43600435611810565b65ffffffffffff60405191168152f35b50346101c95760403660031901126101c957610e6d611656565b6001600160401b03610e7d61166c565b91610e86611a59565b169081158015610ee1575b610a17576001600160401b0390828452600160205260016040852001828216831982541617905516907f1fd6dd7631312dfac2205b52913f99de03b4d7e381d5d27d3dbfe0713e6e63408380a380f35b506001600160401b038214610e91565b50346101c95760403660031901126101c957608063ffffffff65ffffffffffff81610f2b610f1d611656565b610f25611610565b906117bd565b93929590918560405197168752166020860152166040840152166060820152f35b50346101c95760603660031901126101c957610f66611656565b610f6e611610565b906044359163ffffffff831680930361074957610f89611a59565b6001600160401b03610f9a83611757565b9216916001600160401b038314611241578285526001602090815260408087206001600160a01b0385165f908152925290205465ffffffffffff16159081156110df57610ff79063ffffffff610fef426122d4565b911690611a27565b604051604081018181106001600160401b038211176110cb577ff98448b987f1428e0e230e1f3c6e2ce15b5693eaf31827fbd0b1ec4b424ae7cf94926110ac6060959365ffffffffffff9360405283831681526001600160701b03602082018b81528a8d52600160205260408d2060018060a01b0389165f52602052858060405f209451161686198454161783555116600160301b600160a01b0382549160301b1690600160301b600160a01b031916179055565b60408051988952911660208801528601526001600160a01b031693a380f35b634e487b7160e01b88526041600452602488fd5b5082855260016020526040852060018060a01b0383165f526020526111136001600160701b0360405f205460301c16611cbd565b50508463ffffffff82168181115f146111f8570363ffffffff81116111e4579165ffffffffffff7ff98448b987f1428e0e230e1f3c6e2ce15b5693eaf31827fbd0b1ec4b424ae7cf94926111df67ffffffff0000000061118463ffffffff6060985b1661117f426122d4565b611a27565b9260201b1665ffffffffffff60401b8360401b16178917888b52600160205260408b2060018060a01b0387165f5260205260405f2090600160301b600160a01b0382549160301b1690600160301b600160a01b031916179055565b6110ac565b634e487b7160e01b87526011600452602487fd5b50509160609165ffffffffffff7ff98448b987f1428e0e230e1f3c6e2ce15b5693eaf31827fbd0b1ec4b424ae7cf946111df67ffffffff0000000061118463ffffffff8c611175565b63061c6a4360e21b85526004839052602485fd5b5061125f366116af565b909161126d82848333611af8565b93901580611386575b6113785761128683828433611881565b63ffffffff8695161580159061135f575b61134d575b50600354926112d36112ae8284611b3f565b6001600160a01b0385165f9081526001600160e01b0319919091166020526040902090565b6003556001600160401b03811161133957604051916112fc601f8301601f191660200184611788565b81835236828201116113355795602082849382998361132398970137830101523491611c22565b5060035563ffffffff60405191168152f35b8680fd5b634e487b7160e01b86526041600452602486fd5b611358919450611b55565b925f61129c565b5065ffffffffffff61137082611810565b161515611297565b906103a16064938693611b3f565b5063ffffffff841615611276565b5034611422576040366003190112611422576113ae6115fa565b6113b6611610565b906113bf611a59565b6001600160a01b031690813b1561142257604051637a9e5e4b60e01b81526001600160a01b039091166004820152905f908290602490829084905af1801561141757611409575080f35b61141591505f90611788565b005b6040513d5f823e3d90fd5b5f80fd5b346114225760403660031901126114225761143f6115fa565b602435908115158092036114225760207f90d4e7bb7e5d933792b3562e1741306f8be94837e1348dacef9b6f1df56eb13891611479611a59565b6001600160a01b03165f818152808352604090819020600101805460ff60701b1916607087901b60ff60701b161790555193845292a2005b34611422576020366003190112611422576020610da36114cf611656565b611757565b34611422576020366003190112611422576020610cb66114f2611656565b6001600160401b03165f5260016020526001600160401b03600160405f20015460401c1690565b34611422576060366003190112611422576115326115fa565b6024356001600160401b03811161142257611551903690600401611626565b9190604435906001600160401b03821680920361142257611573939293611a59565b6001600160a01b03909316925f5b83811015611415578060051b8201359063ffffffff60e01b82168092036114225783867f9ea6790c7dadfd01c9f8b9762b3682607af2c7e79e05a9f9fdf5580dde9491516020600195835f525f825260405f20815f52825260405f20856001600160401b0319825416179055604051908152a301611581565b600435906001600160a01b038216820361142257565b602435906001600160a01b038216820361142257565b9181601f84011215611422578235916001600160401b038311611422576020808501948460051b01011161142257565b600435906001600160401b038216820361142257565b602435906001600160401b038216820361142257565b9181601f84011215611422578235916001600160401b038311611422576020838186019501011161142257565b906040600319830112611422576004356001600160a01b03811681036114225791602435906001600160401b038211611422576116ee91600401611682565b9091565b6024359063ffffffff8216820361142257565b6060600319820112611422576004356001600160a01b038116810361142257916024356001600160a01b03811681036114225791604435906001600160401b038211611422576116ee91600401611682565b6001600160401b03165f5260016020526117836001600160701b03600160405f20015460801c16611cbd565b505090565b90601f801991011681019081106001600160401b038211176117a957604052565b634e487b7160e01b5f52604160045260245ffd5b6001600160401b03165f9081526001602090815260408083206001600160a01b039094168352929052205465ffffffffffff91611806603083901c6001600160701b0316611cbd565b9490931693909291565b5f52600260205265ffffffffffff60405f20541661182d81611cfa565b1561183757505f90565b90565b60018060a01b03165f525f6020526117836001600160701b03600160405f20015416611cbd565b908060209392818452848401375f828201840152601f01601f1916010190565b604080516001600160a01b039283166020820190815292909316908301526060808301529290916118ca9183916118bc916080840191611861565b03601f198101835282611788565b51902090565b6001600160401b0381116117a95760051b60200190565b80518210156118fb5760209160051b010190565b634e487b7160e01b5f52603260045260245ffd5b6001600160a01b0382165f9081526020819052604090206001015491929160701c60ff1615611941575050505f905f90565b6001600160a01b038116300361197e57506003546001600160a01b039092165f9081526001600160e01b0319909116602052604090205b14905f90565b906119b79260018060a01b03165f525f60205260405f209063ffffffff60e01b165f526020526001600160401b0360405f2054166119d1565b9190156119ca5763ffffffff8216159190565b5f91508190565b6001600160401b03818116036119ea5750506001905f90565b65ffffffffffff92916119fc916117bd565b505092168015159081611a0e57509190565b905065ffffffffffff611a20426122d4565b1610159190565b9065ffffffffffff8091169116019065ffffffffffff8211611a4557565b634e487b7160e01b5f52601160045260245ffd5b611a633633611dff565b9015611a6c5750565b63ffffffff16611aa1576001600160401b03611a8736611f02565b50905063f07e038f60e01b5f52336004521660245260445ffd5b611af56040516020810190338252306040820152606080820152611aed81602060808201368152365f838301375f823683010152601f19601f360116010103601f198101835282611788565b519020611b55565b50565b909291906001600160a01b0384163003611b16576116ee9350611eb3565b9192906004841015611b2c57505050505f905f90565b6116ee93611b3991611b3f565b9161190f565b9060041161142257356001600160e01b03191690565b5f81815260026020526040902054909190603081901c63ffffffff169065ffffffffffff1680611b92578363060a299b60e41b5f5260045260245ffd5b65ffffffffffff611ba2426122d4565b16811115611bbd5783630c65b5bd60e11b5f5260045260245ffd5b611bca9093919293611cfa565b611c10578190805f52600260205260405f2065ffffffffffff1981541690557f76a2a46953689d4861a5d3f6ed883ad7e6af674a21f8e162707159fc9dde614d5f80a390565b631e2975b960e21b5f5260045260245ffd5b91804710611ca757815f92916020849351920190855af18080611c94575b15611c4f575050611837612228565b15611c7457639996b31560e01b5f9081526001600160a01b0391909116600452602490fd5b3d15611c85576040513d5f823e3d90fd5b63d6bda27560e01b5f5260045ffd5b503d151580611c405750813b1515611c40565b4763cf47918160e01b5f5260045260245260445ffd5b611cc6426122d4565b63ffffffff82169165ffffffffffff604082901c811692168211611cee575090915f91508190565b60201c63ffffffff1692565b65ffffffffffff62093a8091160165ffffffffffff8111611a455765ffffffffffff80611d26426122d4565b169116111590565b905f8091602081519101845af48080611c945715611c4f575050611837612228565b6001600160401b0316906001600160401b038214611dec57815f52600160205260405f2060018060a01b0382165f5260205265ffffffffffff60405f20541615611de657815f52600160205260405f2060018060a01b0382165f526020525f604081205560018060a01b0316907ff229baa593af28c41b1d16b748cd7688f0c83aaf92d4be41c44005defe84c1665f80a3600190565b50505f90565b5063061c6a4360e21b5f5260045260245ffd5b9060048110611e5b576001600160a01b0382163014611e8a57611e22905f6120aa565b9290911580611e6c575b611e6357611e39916119d1565b9015611e5b5763ffffffff808093169116908180821191180218169081159190565b50505f905f90565b5050505f905f90565b50305f9081526020819052604090206001015460701c60ff16611e2c565b905060041161142257600354305f90815280356001600160e01b03191660205260409020611978565b919060048210611e63576001600160a01b0383163014611ed75790611e22916120aa565b611ee19250611b3f565b600354305f9081526001600160e01b03199092166020526040909120611978565b5f90600481106120a05780600411611422575f356001600160e01b031916906310a6aa3760e31b82148015612090575b8015612080575b8015612070575b8015612060575b6120545763063fc60f60e21b82148015612044575b8015612034575b6120045763012e238d60e51b82148015611ff4575b611fa3575030825281602052604082209082526020526001600160401b036040822054169181929190565b90506024116101c957806101c957506004356001600160401b038116810361142257611fed906001600160401b03165f5260016020526001600160401b03600160405f2001541690565b6001915f90565b50635be958b160e11b8214611f78565b915050602411611422576004356001600160a01b038116908190036114225761202c9061183a565b6001915f9190565b506308d6122d60e01b8214611f63565b5063167bd39560e01b8214611f5c565b5050506001905f905f90565b5063d22b598960e01b8214611f47565b50635326cae760e11b8214611f40565b5063294b14a960e11b8214611f39565b506330cae18760e01b8214611f32565b50505f905f905f90565b600482106120a0576001600160e01b03196120c58383611b3f565b16916310a6aa3760e31b83148015612218575b8015612208575b80156121f8575b80156121e8575b6120545763063fc60f60e21b831480156121d8575b80156121c8575b6121a15763012e238d60e51b83148015612191575b61214b575050305f525f60205260405f20905f526020526001600160401b0360405f205416905f91905f90565b90915060241161142257600401356001600160401b038116810361142257611fed906001600160401b03165f5260016020526001600160401b03600160405f2001541690565b50635be958b160e11b831461211e565b909150602411611422576004013560018060a01b0381168091036114225761202c9061183a565b506308d6122d60e01b8314612109565b5063167bd39560e01b8314612102565b5063d22b598960e01b83146120ed565b50635326cae760e11b83146120e6565b5063294b14a960e11b83146120df565b506330cae18760e01b83146120d8565b604051903d82523d5f602084013e60203d830101604052565b61225263ffffffff91939293611cbd565b505092168063ffffffff84168181115f146122ba570363ffffffff8111611a45576122a063ffffffff8067ffffffff00000000935b1680620697801181620697801802181661117f426122d4565b9360201b1665ffffffffffff60401b8460401b1617179190565b505067ffffffff000000006122a063ffffffff805f612287565b65ffffffffffff81116122ec5765ffffffffffff1690565b6306dfcc6560e41b5f52603060045260245260445ffdfea2646970667358221220d5646b8182457f53088ea620ceaa8c66a2df70e4e06a0831e62897e4fce4650964736f6c634300081d0033a6eef7e35abe7026729641147f7915573c7e97b47efa546f5f6e3230263bcb49f98448b987f1428e0e230e1f3c6e2ce15b5693eaf31827fbd0b1ec4b424ae7cf")]  // paste bytecode from `out/AccessManager.sol/AccessManager.json`
    contract AccessManager {
        /// @notice constructor(address initialAdmin)
        constructor(address initialAdmin);

        function grantRole(uint64 roleId, address account, uint32 executionDelay) external;

        function setTargetFunctionRole(
            address target,
            bytes4[] memory selectors,
            uint64 roleId
        ) external;
    }
}

sol! {
    #[sol(rpc, bytecode = "0x60c080604052346103a55780613222803803809161001d82856103d8565b833981010360e081126103a5576080610035836103fb565b91601f1901126103a5576040519161004c836103a9565b602081015183526040810151916020840192835260608201519060408501918252608083015192606086019384527f2f658b440c35314f52658ea8a740e05b284cdc84dc9ae01e891f21b8933e7cad60206100b560c06100ae60a086016103fb565b94016103fb565b5f80546001600160a01b0319166001600160a01b03909616958617905560405194855293a160017f9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f005562127500600155621d0100600255621baf806003556154606004555f5160206131e25f395f51905f526060604051610135816103a9565b6f17f1d3a73197d7942695638c4fa9ac0f81525f5160206132025f395f51905f5260208201526f114d1d6855d545a8aa7d76c8cf2e21f2604082015201526f17f1d3a73197d7942695638c4fa9ac0f600b555f5160206132025f395f51905f52600c556f114d1d6855d545a8aa7d76c8cf2e21f2600d555f5160206131e25f395f51905f52600e5560018060a01b0381168015610393576001600160a01b03831680156103935781146103935760017f2817724068d945bfafaa9c0d0655e6ddb5256558ee7fb37ce6f2741726d82d7e60e089898989898960805260a0528351600555825160065580516007558151600855604051602081019060608252601760808201527f344d4943415f434f52455f47554152414e5445455f563100000000000000000060a082015246604082015230606082015260a0815261027b60c0826103d8565b519020806009556040519061028f826103a9565b85825260208201908152600560408301925f845260608101928b84528b5f52600a602052606060405f2092518051845560208101518e85015560408101516002850155015160038301555160048201550191898060a01b03905116898060a01b031983541617825551151581549060ff60a01b9060a01b169060ff60a01b1916179055600954926040519451855251602085015251604084015251606083015260808201525f60a08201528360c0820152a2604051612dd2908161041082396080518181816107e90152818161137301528181611f2101528181612b610152612bcc015260a0518181816107550152818161081101528181611f560152612b310152f35b6337bce3c560e11b5f5260045260245ffd5b5f80fd5b608081019081106001600160401b038211176103c457604052565b634e487b7160e01b5f52604160045260245ffd5b601f909101601f19168101906001600160401b038211908210176103c457604052565b51906001600160a01b03821682036103a55756fe6080806040526004361015610034575b50361561002557633ee6509d60e01b5f5260045ffd5b633ee6509d60e01b5f5260045ffd5b5f905f3560e01c90816307127ea814612035575080630d4976cb14611fca578063115c68c714611eea578063182d350614611ecd5780632261128014611e53578063322241b514611d4a57806338cfe6b014611ceb5780633e0db86914611c435780633f4ba83a14611bd55780634703822414611bb85780634abf24cb146119fc5780634b35928f146119df578063548c0786146117ba578063563550ae146117265780635c975abb1461170257806367e4ecbe146116675780636f77926b146115ee5780637a9e5e4b146115445780638456cb59146114e15780638482c861146113a257806387d8178914610c5f57806389a302711461135d5780638fb360371461131857806390bde5171461126e578063956200d514611250578063991ce4cd146112325780639ee679e814611176578063a0eb80571461107d578063a14a7a0a14610cbd578063a165004314610c5f578063a587f4f314610ba4578063a5fdc5de14610b61578063b0575dd2146109f2578063b84f319714610996578063bf7e214f1461096f578063c4edab2d14610784578063c54e44eb1461073f578063c5b6aa2f146105ed578063cc218ece1461056c578063d0e30db0146104d7578063da0a4c2e1461044d578063da95ebf71461033a578063df4087c6146103035763e5e12b850361000f57346103005761012036600319011261030057600435906001600160401b0382116103005736602383011215610300576101406102766102673660048601356024870161214e565b61027036612184565b90612424565b6001600160401b036101206040519280518452602081015160208501526040810151604085015260018060a01b03606082015116606085015260018060a01b03608082015116608085015260a081015160a085015260c081015160c085015260018060a01b0360e08201511660e08501528261010082015116610100850152015116610120820152f35b80fd5b5034610300578060031936011261030057608060055460065460075460085491604051938452602084015260408301526060820152f35b50346103005760403660031901126103005761035461204e565b6024359061036181612b12565b1561043257811561042357610374612af5565b338352600f6020526040832060018060a01b0382165f5260205260405f20548211610414576040516103a5816120f7565b428152600160208201848152338652601060205260408620828060a01b0385165f5260205260405f20925183555191015560405191428352602083015260018060a01b0316907f196e6601eb68141737e4636af773e3013089d698090efd395ba859863e1f2f9c60403392a380f35b635fe02f5960e01b8352600483fd5b6365e52d5160e11b8352600483fd5b63ee84f40b60e01b83526001600160a01b0316600452602482fd5b50346103005760203660031901126103005760043561046c36336129af565b80156104c85761047e600354826121de565b60025411156104b9576020817f0450cdfce12e580421713ec44389034f33bcf55ed8173759660509918e800db592600455604051908152a180f35b63c3a07fef60e01b8252600482fd5b6365e52d5160e11b8252600482fd5b5080600319360112610300576104eb612b92565b341561055d576104f9612af5565b338152600f602052604081205f805260205260405f2061051a3482546121de565b9055806040513481527ff1c0dd7e9b98bbff859029005ef89b127af049cd18df1a8d79f0b7e019911e5660203392a360015f516020612d7d5f395f51905f525580f35b6365e52d5160e11b8152600490fd5b50346103005760403660031901126103005761058661204e565b9061058f612064565b9161059983612b12565b156105cf579060409160018060a01b03168152600f602052209060018060a01b03165f52602052602060405f2054604051908152f35b5063ee84f40b60e01b81526001600160a01b03909116600452602490fd5b5034610300578060031936011261030057610606612b92565b61060e612af5565b33815260106020526040812081805260205260408120604051610630816120f7565b600182549283835201549160208201928352156107305751600254610654916121de565b421061072157338252600f60205260408220828052602052610685604083205491518083108184180218809261229a565b338352600f6020526040832083805260205260408320553382526010602052604082208280526020528160016040822082815501558180808084335af16106ca6122a7565b50156107125781906040519081527f45892a46e6cef329bb642da6d69846d324db43d19008edc141ed82382eda1bee60203392a360015f516020612d7d5f395f51905f525580f35b6312171d8360e31b8252600482fd5b631f382f6360e21b8252600482fd5b6387bdc6a960e01b8352600483fd5b50346103005780600319360112610300576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50346103005760203660031901126103005761079e61204e565b60405160806107ad8183612112565b600382526060845b818110610958575050604051606081018181106001600160401b038211176109445760409081528582526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000811660208401527f0000000000000000000000000000000000000000000000000000000000000000811691830191909152919390911690845b60038110156108d157600581901b8201518387526010602090815260408089206001600160a01b039093165f818152938352818420878b52600f8452828b208286529093529281902054825460019384015492519395949091906108a485612090565b84526020840152604083015260608201526108bf8287612230565b526108ca8186612230565b5001610841565b5050506040519283926020840190602085528351809252602060408601940192905b82821061090257505050500390f35b91938395508260209160606001949651858060a01b038151168352848101518584015260408101516040840152015160608201520195019201859493916108f3565b634e487b7160e01b86526041600452602486fd5b602090610963612244565b828287010152016107b5565b5034610300578060031936011261030057546040516001600160a01b039091168152602090f35b50346103005760403660031901126103005760406109b261204e565b916109bb612064565b9260018060a01b031681526010602052209060018060a01b03165f526020526040805f206001815491015482519182526020820152f35b503461030057606036600319011261030057600435610a0f612064565b9060443591610a1e36336129af565b610a2781612b12565b15610b46578215610b3757610a3a612b92565b81845260116020526040842080541580610b28575b15610acf57600181018054610100600160a81b031916600884901b610100600160a81b03161790557f7de07bd2aa628dfa876fae9f600dec58e071fc4769629168d212d884c7f16907916020915b610aa88682546121de565b90556040519485526001600160a01b031693a360015f516020612d7d5f395f51905f525580f35b60018101546001600160a01b038381169160081c16819003610b1657507f7de07bd2aa628dfa876fae9f600dec58e071fc4769629168d212d884c7f1690791602091610a9d565b6337bce3c560e11b8652600452602485fd5b5060ff60018201541615610a4f565b6365e52d5160e11b8452600484fd5b63ee84f40b60e01b84526001600160a01b0316600452602483fd5b5034610300576020366003190112610300576040906001600160a01b03610b8661204e565b168152600f602052205f8052602052602060405f2054604051908152f35b503461030057604036600319011261030057610bbe61204e565b60243590610bca612b92565b610bd381612bca565b1561043257811561042357610be6612af5565b6001600160a01b031690610bfc81303385612c06565b338352600f60205260408320825f5260205260405f20610c1d8282546121de565b90556040519081527ff1c0dd7e9b98bbff859029005ef89b127af049cd18df1a8d79f0b7e019911e5660203392a360015f516020612d7d5f395f51905f525580f35b5034610300576020366003190112610300576004358152601160209081526040918290208054600190910154835191825260ff811615159282019290925260089190911c6001600160a01b03169181019190915280606081015b0390f35b503461030057610120366003190112610300576004356001600160401b03811161107957366023820112156110795780600401356001600160401b0381116110755736602482840101116110755761010036602319011261107557610d3a9161026791610d28612b92565b610d30612af5565b602436920161214e565b60a0810151156104c85760c08101805115610423576080820180519092906001600160a01b031615611066576101008101610d826001600160401b03825116600154906121de565b4210611057576001600160401b03815116610da14291600354906121de565b106110485760e0820151610dbd906001600160a01b0316612c98565b906020830192835187526011602052604087209081541580611039575b1561100557600182018054610100600160a81b031916600886901b610100600160a81b03161790555b600182019160ff835416610ff6575486511115610fe7576060019060018060a01b038251168852600f6020526040882060018060a01b0385165f5260205260405f2054865111610fd8579087939291865160018060a01b038351168652600f6020526040862060018060a01b0386165f52602052610e8660405f2091825461229a565b9055600160ff1982541617905560018060a01b03905116835260106020526040832060018060a01b0383165f5260205260405f209081548015159182610fb5575b5050610f95575b506001600160a01b03169384610f52575183518291829182916001600160a01b03165af1610efa6122a7565b5015610f435760207fa8e7ec84095cf4580c2c44b7c7509ebda906f04ddae7850d44d54c3e50d71f0c915b519251604051908152a360015f516020612d7d5f395f51905f525580f35b6312171d8360e31b8452600484fd5b5183517fa8e7ec84095cf4580c2c44b7c7509ebda906f04ddae7850d44d54c3e50d71f0c936020935091610f9091906001600160a01b031687612cc9565b610f25565b600101610fad8154865180821081831802189061229a565b90555f610ece565b610fd09192506001600160401b0390511691600454906121de565b115f80610ec7565b638d5e4a7f60e01b8852600488fd5b63770a20b360e01b8852600488fd5b633bfaf45d60e11b8952600489fd5b60018201546001600160a01b038581169160081c168190036110275750610e03565b6337bce3c560e11b8952600452602488fd5b5060ff60018301541615610dda565b6370d932af60e01b8552600485fd5b630d544bb160e01b8552600485fd5b634e46966960e11b8452600484fd5b8280fd5b5080fd5b503461030057608036600319011261030057611097612064565b6064356001600160a01b0381169160443590838303611172576110b8612b92565b6110c181612bca565b1561115757811561114857831561113957816110f0916110df612af5565b6001600160a01b0316933385612c06565b604051928352602083015233917fb54478165024f1696255f1a7140aff169d808dfbbb509beabb9421daf9060b84604060043592a460015f516020612d7d5f395f51905f525580f35b634e46966960e11b8552600485fd5b6365e52d5160e11b8552600485fd5b63ee84f40b60e01b85526001600160a01b0316600452602484fd5b8480fd5b50346103005760203660031901126103005760043580156104c857611199612af5565b338252600f60205260408220828052602052604082205481116112235781906040516111c4816120f7565b4281526001602082018381523385526010602052604085208580526020526040852092518355519101556040519042825260208201527f196e6601eb68141737e4636af773e3013089d698090efd395ba859863e1f2f9c60403392a380f35b635fe02f5960e01b8252600482fd5b50346103005780600319360112610300576020600954604051908152f35b50346103005780600319360112610300576020600454604051908152f35b50346103005760403660031901126103005761128861204e565b611290612064565b9061129a82612b12565b156112fc576001600160a01b03908116808452601060209081526040808620949093165f818152948252838520928652600f82529483902094845293845291819020548254600190930154825191825293810192909252810191909152606090f35b63ee84f40b60e01b83526001600160a01b038216600452602483fd5b5034610300578060031936011261030057805460a01c60ff161561135557506020638fb3603760e01b5b6040516001600160e01b03199091168152f35b602090611342565b50346103005780600319360112610300576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b5034610300576080366003190112610300576064356044356024356004356113ca36336129af565b801580156114d9575b80156114d1575b80156114c9575b61114857818110156114ba57836113f883856121de565b10156114ba57602080937fa637bd3c6f0b945cca705799c6e048fb8290732846f363d5d302f115b54c999e827f2fab9f1ccb93f5baaaae3bf36ce5faf9487fb064a4fcf35d1be91153c8b3450d97957f1601be03cd5bb7a25feb6a24b86b483874bcc79dbd70679649defd556c4e0ca182877f0450cdfce12e580421713ec44389034f33bcf55ed8173759660509918e800db598600155836003558660045589600255604051908152a1604051908152a1604051908152a1604051908152a180f35b63c3a07fef60e01b8552600485fd5b5083156113e1565b5082156113da565b5081156113d3565b50346103005780600319360112610300576114fc36336129af565b611504612af5565b805460ff60a81b1916600160a81b1781556040513381527f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a25890602090a180f35b50346103005760203660031901126103005761155e61204e565b8154906001600160a01b03821633036115dc57803b156115c1576001600160a01b03166001600160a01b031991909116811782556040519081527f2f658b440c35314f52658ea8a740e05b284cdc84dc9ae01e891f21b8933e7cad90602090a180f35b6361798f2f60e11b83526001600160a01b0316600452602482fd5b62d1953b60e31b835233600452602483fd5b346116635760203660031901126116635761160761204e565b60018060a01b0316805f52601060205260405f205f805260205260405f20905f52600f60205260405f205f805260205260405f2054610cb960018354930154604051938493846040919493926060820195825260208201520152565b5f80fd5b346116635760203660031901126116635760043561168536336129af565b80156116f357611697816004546121de565b600254118015906116e7575b6116d8576020817fa637bd3c6f0b945cca705799c6e048fb8290732846f363d5d302f115b54c999e92600355604051908152a1005b63c3a07fef60e01b5f5260045ffd5b508060015410156116a3565b6365e52d5160e11b5f5260045ffd5b34611663575f36600319011261166357602060ff5f5460a81c166040519015158152f35b34611663576020366003190112611663576001600160401b0361174761207a565b61174f612244565b50165f52600a60205260e060405f2060ff600482015491611774600582015491612268565b9260606040519480518652602081015160208701526040810151604087015201516060850152608084015260018060a01b03811660a084015260a01c16151560c0820152f35b3461166357610100366003190112611663576117d461207a565b60803660231901126116635760c435906001600160a01b0382169060a435908284036116635760e43590811593841591828403611663576001600160401b039061181e36336129af565b169586156119cc576001871480806119c3575b6119b057875f52600a6020528460405f209293821590816119a7575b50611978575b50859480611970575b611961577f2817724068d945bfafaa9c0d0655e6ddb5256558ee7fb37ce6f2741726d82d7e9660e09681611958575b5061194c575b60243580835560443560018401819055606435600285018190556084356003860181905560048601899055600590950180546001600160a81b0319166001600160a01b0390971696871760a089901b60ff60a01b1617905592909190611933575b505060408051602435815260443560208201526064359181019190915260843560608201529491506119219050565b608084015260a083015260c0820152a2005b60055560065560075560085582600955868080806118f2565b60048201549450611891565b9050158961188b565b63c34809af60e01b5f5260045ffd5b50851561185c565b9092506119945760058101546001600160a01b03169184611853565b8663d8a9714760e01b5f5260045260245ffd5b9050158a61184d565b8763efe1c15360e01b5f5260045260245ffd5b50821515611831565b8663efe1c15360e01b5f5260045260245ffd5b34611663575f366003190112611663576020600254604051908152f35b3461166357602036600319011261166357611a1561204e565b611a1d612b92565b611a2681612b12565b15611b9857611a33612af5565b335f52601060205260405f2060018060a01b0382165f5260205260405f2090604051611a5e816120f7565b60018354938483520154926020820193845215611b895751600254611a82916121de565b4210611b7a57335f52600f60205260405f2060018060a01b0382165f52602052611abb60405f205492518084108185180218809361229a565b335f818152600f602090815260408083206001600160a01b03969096168084529582528083209490945591815260108252828120848252909152908120818155600101559081611b6a575f80808084335af1611b156122a7565b5015611b5b575b6040519081527f45892a46e6cef329bb642da6d69846d324db43d19008edc141ed82382eda1bee60203392a360015f516020612d7d5f395f51905f5255005b6312171d8360e31b5f5260045ffd5b611b75813384612cc9565b611b1c565b631f382f6360e21b5f5260045ffd5b6387bdc6a960e01b5f5260045ffd5b63ee84f40b60e01b5f9081526001600160a01b0391909116600452602490fd5b34611663575f366003190112611663576020600154604051908152f35b34611663575f36600319011261166357611bef36336129af565b5f5460ff8160a81c1615611c345760ff60a81b19165f556040513381527f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa90602090a1005b638dfc202b60e01b5f5260045ffd5b3461166357602036600319011261166357611c5c61204e565b611c6581612b12565b15611b9857611c72612af5565b335f52601060205260405f2060018060a01b0382165f5260205260405f205415611b8957335f8181526010602090815260408083206001600160a01b03959095168084529490915281208181556001018190557fe575a063e3dae59781b2089c49a922a8d6a76290b3e73b67d1fa34ca59a8c87f9080a3005b3461166357602036600319011261166357600435611d0936336129af565b80156116f3576003548110156116d8576020817f1601be03cd5bb7a25feb6a24b86b483874bcc79dbd70679649defd556c4e0ca192600155604051908152a1005b3461166357608036600319011261166357611d6536336129af565b60017f2817724068d945bfafaa9c0d0655e6ddb5256558ee7fb37ce6f2741726d82d7e60e0600435806005557f624010c69da8a2f5ccfa196b6307ea820b2a82244673d41491e2903a6b1a38b260806024359283600655604435806007556064359081600855885f52600a60205260405f2095838755808a880155816002880155826003880155604051938452602084015260408301526060820152a160048181015460059092015460408051923583526024356020840152604435908301526064356060830152909160ff91906080840152858060a01b03811660a084015260a01c16151560c0820152a2005b34611663575f36600319011261166357611e6b612af5565b335f52601060205260405f205f805260205260405f205415611b8957335f52601060205260405f205f80526020525f60016040822082815501555f337fe575a063e3dae59781b2089c49a922a8d6a76290b3e73b67d1fa34ca59a8c87f8280a3005b34611663575f366003190112611663576020600354604051908152f35b34611663575f36600319011261166357604051611f08606082612112565b6002815260208101906040368337611f1f816121ff565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169052611f5481612220565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690526040805160208082529251928101839052928392918301915f5b818110611fa8575050500390f35b82516001600160a01b0316845285945060209384019390920191600101611f9a565b3461166357602036600319011261166357600435611fe836336129af565b80156116f35780611ffe600454600354906121de565b10156116d8576020817f2fab9f1ccb93f5baaaae3bf36ce5faf9487fb064a4fcf35d1be91153c8b3450d92600255604051908152a1005b34611663575f3660031901126116635780600160209252f35b600435906001600160a01b038216820361166357565b602435906001600160a01b038216820361166357565b600435906001600160401b038216820361166357565b608081019081106001600160401b038211176120ab57604052565b634e487b7160e01b5f52604160045260245ffd5b61010081019081106001600160401b038211176120ab57604052565b61014081019081106001600160401b038211176120ab57604052565b604081019081106001600160401b038211176120ab57604052565b90601f801991011681019081106001600160401b038211176120ab57604052565b6001600160401b0381116120ab57601f01601f191660200190565b92919261215a82612133565b916121686040519384612112565b829481845281830111611663578281602093845f960137010152565b610100906023190112611663576040519061219e826120bf565b602435825260443560208301526064356040830152608435606083015260a435608083015260c43560a083015260e43560c08301526101043560e0830152565b919082018092116121eb57565b634e487b7160e01b5f52601160045260245ffd5b80511561220c5760200190565b634e487b7160e01b5f52603260045260245ffd5b80516001101561220c5760400190565b805182101561220c5760209160051b010190565b6040519061225182612090565b5f6060838281528260208201528260408201520152565b9060405161227581612090565b6060600382948054845260018101546020850152600281015460408501520154910152565b919082039182116121eb57565b3d156122d1573d906122b882612133565b916122c66040519384612112565b82523d5f602084013e565b606090565b604051906122e3826120db565b5f610120838281528260208201528260408201528260608201528260808201528260a08201528260c08201528260e0820152826101008201520152565b51906001600160401b038216820361166357565b60405190612341826120bf565b5f60e0838281528260208201528260408201528260608201528260808201528260a08201528260c08201520152565b51906001600160a01b038216820361166357565b90816101409103126116635761241b610120604051926123a3846120db565b8051845260208101516020850152604081015160408501526123c760608201612370565b60608501526123d860808201612370565b608085015260a081015160a085015260c081015160c08501526123fd60e08201612370565b60e085015261240f6101008201612320565b61010085015201612320565b61012082015290565b919061242e6122d6565b508251830191604084602085019403126116635761244e60208501612320565b9260408501516001600160401b03811161166357850181603f820112156116635760208101519461247e86612133565b9561248c6040519788612112565b808752602087019360408483010111611663576020815f9260406001600160401b039601875e880101521691825f52600a60205260405f20600581015460ff8160a01c161561299c57604051976124e460608a612112565b600289526040965f5b888110612984575060405161250181612090565b600b548152600c546020820152600d546040820152600e5460608201526125278b6121ff565b526125318a6121ff565b5061253b84612268565b6125448b612220565b5261254e8a612220565b506040519761255e60608a612112565b600289525f5b81811061296d575050612576886121ff565b52612580876121ff565b50612589612334565b906040516101008101916040368437612607606f8383519361014082019481602001865e518101600160f81b6101408201525f6101428201537f424c535f5349475f424c53313233383147325f584d443a5348412d3235365f536101438201526b5357555f524f5f4e554c5f2b60a01b610163820152030184612d21565b9283602052838152610120830193600185536101218401907f424c535f5349475f424c53313233383147325f584d443a5348412d3235365f5382526101418501916b5357555f524f5f4e554c5f2b60a01b835260205f604d8660025afa60203d141615611663575f5186529091604d9161014d8701919060026020895b8051881889520190808b537f424c535f5349475f424c53313233383147325f584d443a5348412d3235365f5383526b5357555f524f5f4e554c5f2b60a01b845260205f878a60025afa60203d141615611663575f51825260010195600987146126f1579590602090612684565b50505050505050604061277d92602061279596838552525260016101a08401526f1a0111ea397fe69a4b1ba7b6434bacd76101c08401527f64774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab6101e08401526127598382612d39565b6127666040840182612d39565b6127736080840182612d39565b60c0830190612d39565b6127878382612d57565b826101000190608001612d57565b6101008161020081600d5afa6101003d141615612960576127ba879695999897612220565b526127c485612220565b508697875196604051988703955f9a5b808a8d14612810579b6101008c60808b9c9d9e9f600195829d60208093019e8f958861018002019551865e01015191015e019a999897966127d4565b5050949950945094909591965f602091846101800290600f5afa9160203d14915114161615612953575f5115612944576128486122d6565b506001811480612933575b1561287b5750805161286a93500160200190612384565b905b60048251910154036119615790565b91926001600160a01b03169182156129215750916101409160449360405194858094819363e5c5e9a360e01b8352602060048401525180918160248501528484015e5f828201840152601f01601f191681010301915afa908115612916575f916128e7575b509061286c565b61290991506101403d811161290f575b6129018183612112565b810190612384565b5f6128e0565b503d6128f7565b6040513d5f823e3d90fd5b63d8a9714760e01b5f5260045260245ffd5b506001600160a01b03841615612853565b638baa579f60e01b5f5260045ffd5b634df45e2f5f526004601cfd5b63c55e5e335f526004601cfd5b602090612978612334565b82828d01015201612564565b808b60208093612992612244565b92010152016124ed565b8463efe1c15360e01b5f5260045260245ffd5b5f805490926001600160a01b038216929160048210611663575f5f9060405f815196602088019063b700961360e01b825260018060a01b03169788602482015230604482015263ffffffff60e01b833516606482015260648152612a14608482612112565b828052826020525190895afa612ae2575b15612a33575b505050505050565b63ffffffff1615612ad05760ff60a01b1916600160a01b175f55823b15611663576064925f9283604051958680958194634a63ebf760e11b83526004830152604060248301528060448301528084848401378181018301849052601f01601f191681010301925af1801561291657612abd575b50805460ff60a01b191690555f8080808080612a2b565b612ac991505f90612112565b5f5f612aa6565b8262d1953b60e31b5f5260045260245ffd5b50505f516020518060201c150290612a25565b60ff5f5460a81c16612b0357565b63d93c066560e01b5f5260045ffd5b6001600160a01b03168015908115612b5f575b8115612b2f575090565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614919050565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031681149150612b25565b60025f516020612d7d5f395f51905f525414612bbb5760025f516020612d7d5f395f51905f5255565b633ee5aeb560e01b5f5260045ffd5b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b039081169116908114908115612b2f575090565b6040516323b872dd60e01b5f9081526001600160a01b039384166004529290931660245260449390935260209060648180865af19060015f5114821615612c77575b6040525f60605215612c575750565b635274afe760e01b5f9081526001600160a01b0391909116600452602490fd5b906001811516612c8f57823b15153d15161690612c48565b503d5f823e3d90fd5b90612ca282612b12565b612cc7575063ee84f40b60e01b5f9081526001600160a01b0391909116600452602490fd5b565b916040519163a9059cbb60e01b5f5260018060a01b031660045260245260205f60448180865af19060015f5114821615612d09575b60405215612c575750565b906001811516612c8f57823b15153d15161690612cfe565b6020915f9160025afa60203d141615611663575f5190565b906101006040928383606083015e60055afa60403d14161561166357565b9060806101009260115afa6101003d141615612d6f57565b6389083b915f526004601cfdfe9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f00a26469706673582212201c6e21ee4454ac8c73bf8d057a63e79a2f97a20297b4fc207e2f0f316fe5b9c164736f6c634300081d003367816aef1db507c96655b9d5caac42364e6f38ba0ecb751bad54dcd6b939c2cac3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb")]
    contract Core4Mica {
        // ========= Errors =========
        error AmountZero();
        error InsufficientAvailable();
        error TransferFailed();
        error GracePeriodNotElapsed();
        error NoWithdrawalRequested();
        error DirectTransferNotAllowed();
        error DoubleSpendingDetected();
        error TabNotYetOverdue();
        error TabExpired();
        error TabPreviouslyRemunerated();
        error TabAlreadyPaid();
        error InvalidSignature();
        error InvalidRecipient();
        error IllegalValue();

        // ========= Storage =========
        function remunerationGracePeriod() external view returns (uint256);
        function withdrawalGracePeriod() external view returns (uint256);
        function tabExpirationTime() external view returns (uint256);
        function synchronizationDelay() external view returns (uint256);

        /// TODO(#22): move key to registry
        function GUARANTEE_VERIFICATION_KEY() external view returns (
            bytes32 x1, bytes32 x2, bytes32 y1, bytes32 y2
        );

        // ========= Events =========
        event CollateralDeposited(address indexed user, uint256 amount);
        event RecipientRemunerated(uint256 indexed tab_id, uint256 amount);
        event CollateralWithdrawn(address indexed user, uint256 amount);
        event WithdrawalRequested(address indexed user, uint256 when, uint256 amount);
        event WithdrawalCanceled(address indexed user);
        event WithdrawalGracePeriodUpdated(uint256 newGracePeriod);
        event RemunerationGracePeriodUpdated(uint256 newGracePeriod);
        event TabExpirationTimeUpdated(uint256 newExpirationTime);
        event SynchronizationDelayUpdated(uint256 newSynchronizationDelay);
        event VerificationKeyUpdated((bytes32,bytes32,bytes32,bytes32) newVerificationKey);
        event PaymentRecorded(uint256 indexed tab_id, uint256 amount);
        event TabPaid(
            uint256 indexed tab_id,
            address indexed asset,
            address indexed user,
            address recipient,
            uint256 amount
        );

        // ========= Structs =========
        struct WithdrawalRequest {
            uint256 timestamp;
            uint256 amount;
        }

        struct PaymentStatus {
            uint256 paid;
            bool remunerated;
            address asset;
        }

        struct UserAssetInfo {
            address asset;
            uint256 collateral;
            uint256 withdrawalRequestTimestamp;
            uint256 withdrawalRequestAmount;
        }

        struct Guarantee {
            bytes32 domain;
            uint256 tab_id;
            uint256 req_id;
            address client;
            address recipient;
            uint256 amount;
            uint256 total_amount;
            address asset;
            uint64 timestamp;
            uint64 version;
        }

        struct G1Point {
            bytes32 x_a;
            bytes32 x_b;
            bytes32 y_a;
            bytes32 y_b;
        }

        struct G2Point {
            bytes32 x_c0_a;
            bytes32 x_c0_b;
            bytes32 x_c1_a;
            bytes32 x_c1_b;
            bytes32 y_c0_a;
            bytes32 y_c0_b;
            bytes32 y_c1_a;
            bytes32 y_c1_b;
        }

        // ========= Constructor =========
        /// @param manager Address of AccessManager
        /// @param verificationKey Initial BLS verification key
        constructor(
            address manager,
            (bytes32,bytes32,bytes32,bytes32) verificationKey,
            address usdc,
            address usdt
        );

        // ========= User flows =========
        function deposit() external payable;
        function depositStablecoin(
            address asset,
            uint256 amount
        ) external payable nonReentrant stablecoin(asset) nonZero(amount);

        function requestWithdrawal(uint256 amount) external;
        function requestWithdrawal(
            address asset,
            uint256 amount
        ) external supportedAsset(asset) nonZero(amount);

        function cancelWithdrawal() external;
        function cancelWithdrawal(address asset) external supportedAsset(asset);

        function finalizeWithdrawal() external;
        function finalizeWithdrawal(
            address asset
        ) external nonReentrant supportedAsset(asset);

        function payTabInERC20Token(
            uint256 tab_id,
            address asset,
            uint256 amount,
            address recipient
        ) external;

        /// Remunerate a recipient based on a signed guarantee
        function remunerate(
            bytes calldata guaranteeData,
            G2Point calldata signature
        ) external;

        // ========= Admin / Manager =========
        function setRemunerationGracePeriod(uint256 _gracePeriod) external;
        function setWithdrawalGracePeriod(uint256 _gracePeriod) external;
        function setTabExpirationTime(uint256 _expirationTime) external;
        function setSynchronizationDelay(uint256 _synchronizationDelay) external;
        function setGuaranteeVerificationKey(G1Point verificationKey) external;
        function configureGuaranteeVersion(
            uint64 version,
            G1Point verificationKey,
            bytes32 domainSeparator,
            address decoder,
            bool enabled
        ) external;
        function recordPayment(uint256 tab_id, address asset, uint256 amount) external;

        function guaranteeDomainSeparator() external view returns (bytes32);
    }
}

sol! {
    #[sol(rpc, bytecode = "0x60806040523461030b57610a42803803806100198161030f565b92833981019060408183031261030b5780516001600160401b03811161030b5782610045918301610334565b60208201519092906001600160401b03811161030b576100659201610334565b81516001600160401b038111610221575f54600181811c91168015610301575b602082101461020357601f811161029f575b50602092601f821160011461024057928192935f92610235575b50508160011b915f199060031b1c1916175f555b80516001600160401b03811161022157600154600181811c91168015610217575b602082101461020357601f81116101a0575b50602091601f8211600114610140579181925f92610135575b50508160011b915f199060031b1c1916176001555b6040516106bc90816103868239f35b015190505f80610111565b601f1982169260015f52805f20915f5b85811061018857508360019510610170575b505050811b01600155610126565b01515f1960f88460031b161c191690555f8080610162565b91926020600181928685015181550194019201610150565b60015f527fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6601f830160051c810191602084106101f9575b601f0160051c01905b8181106101ee57506100f8565b5f81556001016101e1565b90915081906101d8565b634e487b7160e01b5f52602260045260245ffd5b90607f16906100e6565b634e487b7160e01b5f52604160045260245ffd5b015190505f806100b1565b601f198216935f8052805f20915f5b868110610287575083600195961061026f575b505050811b015f556100c5565b01515f1960f88460031b161c191690555f8080610262565b9192602060018192868501518155019401920161024f565b5f80527f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563601f830160051c810191602084106102f7575b601f0160051c01905b8181106102ec5750610097565b5f81556001016102df565b90915081906102d6565b90607f1690610085565b5f80fd5b6040519190601f01601f191682016001600160401b0381118382101761022157604052565b81601f8201121561030b578051906001600160401b03821161022157610363601f8301601f191660200161030f565b928284526020838301011161030b57815f9260208093018386015e830101529056fe60806040526004361015610011575f80fd5b5f3560e01c806306fdde031461047f578063095ea7b31461040657806318160ddd146103e957806323b872dd146102f7578063313ce567146102dc57806340c10f191461026257806370a082311461022a57806395d89b411461010c578063a9059cbb146100db5763dd62ed3e14610087575f80fd5b346100d75760403660031901126100d7576100a061057b565b6100a8610591565b6001600160a01b039182165f908152600460209081526040808320949093168252928352819020549051908152f35b5f80fd5b346100d75760403660031901126100d7576101016100f761057b565b60243590336105d5565b602060405160018152f35b346100d7575f3660031901126100d7576040515f6001548060011c90600181168015610220575b60208310811461020c578285529081156101f0575060011461019a575b50819003601f01601f191681019067ffffffffffffffff82118183101761018657604082905281906101829082610551565b0390f35b634e487b7160e01b5f52604160045260245ffd5b60015f9081529091507fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf65b8282106101da57506020915082010182610150565b60018160209254838588010152019101906101c5565b90506020925060ff191682840152151560051b82010182610150565b634e487b7160e01b5f52602260045260245ffd5b91607f1691610133565b346100d75760203660031901126100d7576001600160a01b0361024b61057b565b165f526003602052602060405f2054604051908152f35b346100d75760403660031901126100d75761027b61057b565b5f7fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60206024359360018060a01b03169384845260038252604084206102c28282546105c8565b90556102d0816002546105c8565b600255604051908152a3005b346100d7575f3660031901126100d757602060405160128152f35b346100d75760603660031901126100d75761031061057b565b610318610591565b6001600160a01b0382165f8181526004602090815260408083203384529091529020549260443592918385106103b85761010194846001820161035e575b5050506105d5565b610367916105a7565b5f8281526004602090815260408083203380855290835292819020849055519283529092917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259190a3848084610356565b60405162461bcd60e51b8152602060048201526009602482015268414c4c4f57414e434560b81b6044820152606490fd5b346100d7575f3660031901126100d7576020600254604051908152f35b346100d75760403660031901126100d75761041f61057b565b335f8181526004602090815260408083206001600160a01b03909516808452948252918290206024359081905591519182527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591a3602060405160018152f35b346100d7575f3660031901126100d7576040515f5f548060011c90600181168015610547575b60208310811461020c578285529081156101f057506001146104f35750819003601f01601f191681019067ffffffffffffffff82118183101761018657604082905281906101829082610551565b5f8080529091507f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5635b82821061053157506020915082010182610150565b600181602092548385880101520191019061051c565b91607f16916104a5565b602060409281835280519182918282860152018484015e5f828201840152601f01601f1916010190565b600435906001600160a01b03821682036100d757565b602435906001600160a01b03821682036100d757565b919082039182116105b457565b634e487b7160e01b5f52601160045260245ffd5b919082018092116105b457565b60018060a01b031690815f5260036020528260405f2054106106575760207fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef91835f526003825260405f2061062b8682546105a7565b905560018060a01b031693845f526003825260405f2061064c8282546105c8565b9055604051908152a3565b60405162461bcd60e51b815260206004820152600760248201526642414c414e434560c81b6044820152606490fdfea2646970667358221220b44fb333cdf53406cf0f50f97816a9e3052e7ab385be0585c4ba41051539fb5e64736f6c634300081d0033")]
    contract MockERC20 {
        event Transfer(address indexed from, address indexed to, uint256 amount);
        event Approval(address indexed owner, address indexed spender, uint256 amount);

        constructor(string memory name_, string memory symbol_);

        function mint(address to, uint256 amount) external;
        function approve(address spender, uint256 amount) external returns (bool);
        function transfer(address to, uint256 amount) external returns (bool);
        function transferFrom(address from, address to, uint256 amount) external returns (bool);
    }
}
